{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigation } from '@react-navigation/native';\nimport { UserInfoContext } from \"../context/userInfoContext\";\nimport { storage } from \"../../FirebaseConfig\";\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport * as ImagePicker from 'expo-image-picker';\nimport { DataProcessorContext } from \"../context/DataProcessor\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EditProfile = function EditProfile() {\n  var _useContext = useContext(DataProcessorContext),\n      currentUser = _useContext.currentUser;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      name = _useState4[0],\n      setName = _useState4[1];\n\n  function uploadImage(imageUri) {\n    var response, blobFile, reference, result, url;\n    return _regeneratorRuntime.async(function uploadImage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(fetch(imageUri));\n\n          case 3:\n            response = _context.sent;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 6:\n            blobFile = _context.sent;\n            reference = ref(storage, \"your_name.jpg\");\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(uploadBytes(reference, blobFile));\n\n          case 10:\n            result = _context.sent;\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(getDownloadURL(result.ref));\n\n          case 13:\n            url = _context.sent;\n            return _context.abrupt(\"return\", url);\n\n          case 17:\n            _context.prev = 17;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 17]], Promise);\n  }\n\n  var pickImage = function _callee() {\n    var result;\n    return _regeneratorRuntime.async(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n              uploadImage(result.uri).then(function (url) {\n                console.log(url);\n              });\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleSaveProfile = function handleSaveProfile() {};\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [image ? _jsx(Image, {\n      source: {\n        uri: image\n      },\n      resizeMode: \"cover\",\n      style: {\n        aspectRatio: 1,\n        width: '40%',\n        borderWidth: '2px',\n        borderRadius: '100%'\n      }\n    }) : _jsx(Image, {\n      resizeMode: \"cover\",\n      style: {\n        aspectRatio: 1,\n        width: '40%',\n        borderWidth: '2px',\n        borderRadius: '100%'\n      },\n      source: {\n        uri: currentUser == null ? void 0 : currentUser.userProfile\n      }\n    }), _jsx(Button, {\n      title: \"Choose an Image\",\n      onPress: pickImage\n    }), _jsx(View, {\n      style: styles.content,\n      children: _jsxs(View, {\n        style: {\n          padding: 0\n        },\n        children: [_jsx(Text, {\n          style: {\n            paddingVertical: 5\n          },\n          children: \"Username:\"\n        }), _jsx(TextInput, {\n          style: styles.textInput,\n          onChangeText: setName\n        })]\n      })\n    }), _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        handleSaveProfile();\n      },\n      style: styles.saveButton,\n      children: _jsx(Text, {\n        style: {\n          color: '#000000',\n          fontSize: '20px',\n          fontWeight: '500'\n        },\n        children: \"SAVE\"\n      })\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    height: '100%',\n    width: '100%',\n    overflow: 'scroll',\n    display: \"flex\",\n    paddingTop: \"20px\",\n    paddingBottom: '20px',\n    alignItems: 'center',\n    gap: 20\n  },\n  flexDirection: {\n    flexDirection: 'row',\n    gap: 15\n  },\n  content: {\n    paddingVertical: '10px',\n    display: 'flex',\n    flexDirection: 'column',\n    alignContent: 'center'\n  },\n  textInput: {\n    borderWidth: 1,\n    borderColor: '#401F02',\n    paddingLeft: 5,\n    backgroundColor: 'white',\n    height: 21\n  },\n  saveButton: {\n    width: '40%',\n    height: '40px',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#ECD0B8',\n    borderRadius: '20px',\n    borderColor: 'black',\n    borderWidth: '1px',\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 10,\n      height: 10\n    },\n    shadowOpacity: 0.36,\n    shadowRadius: 7,\n    elevation: 11\n  }\n});\nexport default EditProfile;","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigation","UserInfoContext","storage","ref","uploadBytes","getDownloadURL","ImagePicker","DataProcessorContext","EditProfile","currentUser","image","setImage","name","setName","uploadImage","imageUri","fetch","response","blob","blobFile","reference","result","url","Promise","reject","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","cancelled","uri","then","console","log","handleSaveProfile","styles","container","aspectRatio","width","borderWidth","borderRadius","userProfile","content","padding","paddingVertical","textInput","saveButton","color","fontSize","fontWeight","StyleSheet","create","flex","height","overflow","display","paddingTop","paddingBottom","alignItems","gap","flexDirection","alignContent","borderColor","paddingLeft","backgroundColor","justifyContent","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"sources":["/Users/eason/Desktop/git-project/FYP/src/containers/EditProfile.js"],"sourcesContent":["import { View, Text, StyleSheet, Image, TouchableOpacity, Button, TextInput } from 'react-native'\nimport React, {useState, useEffect, useContext} from 'react'\nimport { useNavigation } from '@react-navigation/native'\nimport { UserInfoContext } from '../context/userInfoContext'\nimport { storage } from '../../FirebaseConfig'\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage'\nimport * as ImagePicker from 'expo-image-picker';\nimport { DataProcessorContext } from '../context/DataProcessor'\n\nconst EditProfile = () => {\n\n    const { \n        currentUser\n      } = useContext(DataProcessorContext);\n\n    const [image, setImage] = useState(null);\n    const [name, setName] = useState('');\n\n    async function uploadImage(imageUri) {\n        try {\n          const response = await fetch(imageUri)\n          const blobFile = await response.blob()\n      \n          const reference = ref(storage, \"your_name.jpg\")\n          const result = await uploadBytes(reference, blobFile)\n          const url = await getDownloadURL(result.ref)\n      \n          return url\n        } catch (err) {\n          return Promise.reject(err)\n      }\n    }\n\n  const pickImage = async () => {\n    // No permissions request is necessary for launching the image library\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n\n    if (!result.cancelled) {\n      setImage(result.uri);\n      uploadImage(result.uri).then(url => {\n        console.log(url)\n      })\n    }\n  };\n\n  const handleSaveProfile = () => {\n\n  }\n\n  return (\n    <View style={styles.container}>\n        {image ? \n            <Image source={{ uri: image }} resizeMode='cover' style={{aspectRatio: 1, width: '40%', borderWidth: '2px', borderRadius: '100%' }}/>\n                :\n            <Image resizeMode='cover' style={{aspectRatio: 1, width: '40%', borderWidth: '2px', borderRadius: '100%' }} source={{\n            uri: currentUser?.userProfile\n            }}/>\n        }\n        <Button title=\"Choose an Image\" onPress={pickImage} />\n\n        <View style={styles.content}>\n            <View style={{padding: 0}}>\n                <Text style={{paddingVertical: 5}}>Username:</Text>\n                <TextInput style={styles.textInput} onChangeText={setName}></TextInput>\n            </View>\n        </View>\n        \n        <TouchableOpacity onPress={()=> { handleSaveProfile() }} style={styles.saveButton}>\n            <Text style={{color:'#000000', fontSize: '20px', fontWeight: '500'}}>SAVE</Text>\n        </TouchableOpacity>\n      \n    </View>\n  );\n\n\n\n}\n\nconst styles = StyleSheet.create({\n\n    container: {\n        flex: 1,\n        height:'100%',\n        width:'100%',\n        overflow: 'scroll',\n        display: \"flex\",\n        paddingTop: \"20px\",\n        paddingBottom: '20px',\n        alignItems: 'center',\n        gap: 20\n      },\n    \n      flexDirection: {\n        flexDirection: 'row',\n        gap: 15,\n      },\n\n      content: {\n        paddingVertical: '10px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignContent: 'center'\n      },\n\n      textInput:{\n        borderWidth: 1,\n        borderColor: '#401F02',\n        paddingLeft: 5,\n        backgroundColor: 'white',\n        height: 21\n      },\n\n      saveButton: {\n        width: '40%', \n        height: '40px',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#ECD0B8',\n        borderRadius: '20px',\n        borderColor: 'black',\n        borderWidth: '1px',\n        shadowColor: \"#000\",\n        shadowOffset: {\n          width: 10,\n          height: 10,\n        },\n        shadowOpacity: 0.36,\n        shadowRadius: 7,\n        elevation: 11,\n      },\n    \n  })\n  \n\nexport default EditProfile;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}