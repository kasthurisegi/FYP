{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useEffect, useState, useReducer, useContext, useRef } from \"react\";\nimport { auth, db } from \"../../FirebaseConfig\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { UserInfoContext } from \"./userInfoContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var DataProcessorContext = createContext();\nexport var DataProcessorContextProvider = function DataProcessorContextProvider(_ref) {\n  var children = _ref.children;\n\n  var _useContext = useContext(UserInfoContext),\n      userID = _useContext.userID;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentUser = _useState2[0],\n      setCurrentUser = _useState2[1];\n\n  useEffect(function () {\n    return getUserData().then(function (data) {\n      setCurrentUser(data);\n    });\n  }, [userID]);\n\n  var getUserData = function _callee() {\n    var docRef, docSnap;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!userID) {\n              _context.next = 10;\n              break;\n            }\n\n            docRef = doc(db, \"users\", userID);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(getDoc(docRef));\n\n          case 4:\n            docSnap = _context.sent;\n\n            if (!docSnap.exists()) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", docSnap.data());\n\n          case 9:\n            console.log(\"No such document!\");\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsx(DataProcessorContext.Provider, {\n    value: {},\n    children: children\n  });\n};","map":{"version":3,"names":["React","createContext","useEffect","useState","useReducer","useContext","useRef","auth","db","onAuthStateChanged","doc","getDoc","UserInfoContext","DataProcessorContext","DataProcessorContextProvider","children","userID","currentUser","setCurrentUser","getUserData","then","data","docRef","docSnap","exists","console","log"],"sources":["/Users/eason/Desktop/git-project/FYP/src/context/DataProcessor.js"],"sourcesContent":["\nimport React, { createContext, useEffect, useState, useReducer, useContext, useRef } from \"react\";\nimport { auth, db } from \"../../FirebaseConfig\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { UserInfoContext } from \"./userInfoContext\";\n\n\nexport const DataProcessorContext = createContext();\n\nexport const DataProcessorContextProvider = ({ children }) => {\n\n    const { userID } = useContext(UserInfoContext);\n    const [currentUser, setCurrentUser] = useState(null);\n\n    useEffect(() => {\n        return getUserData().then(data => {\n            setCurrentUser(data)\n        })\n    },[userID])\n\n    const getUserData = async () => {\n        if(userID){\n            const docRef = doc(db, \"users\", userID);\n            const docSnap = await getDoc(docRef);\n\n            if (docSnap.exists()) {\n                return docSnap.data()\n            } else {\n            // doc.data() will be undefined in this case\n            console.log(\"No such document!\");\n            }\n        }\n    }\n\n    return (\n        <DataProcessorContext.Provider value={{\n\n\n        }}>\n            {children}\n        </DataProcessorContext.Provider>\n    );\n\n};"],"mappings":";;AACA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,EAAoDC,UAApD,EAAgEC,UAAhE,EAA4EC,MAA5E,QAA0F,OAA1F;AACA,SAASC,IAAT,EAAeC,EAAf;AACA,SAASC,kBAAT,QAAmC,eAAnC;AACA,SAASC,GAAT,EAAcC,MAAd,QAA4B,oBAA5B;AACA,SAASC,eAAT;;AAGA,OAAO,IAAMC,oBAAoB,GAAGZ,aAAa,EAA1C;AAEP,OAAO,IAAMa,4BAA4B,GAAG,SAA/BA,4BAA+B,OAAkB;EAAA,IAAfC,QAAe,QAAfA,QAAe;;EAE1D,kBAAmBV,UAAU,CAACO,eAAD,CAA7B;EAAA,IAAQI,MAAR,eAAQA,MAAR;;EACA,gBAAsCb,QAAQ,CAAC,IAAD,CAA9C;EAAA;EAAA,IAAOc,WAAP;EAAA,IAAoBC,cAApB;;EAEAhB,SAAS,CAAC,YAAM;IACZ,OAAOiB,WAAW,GAAGC,IAAd,CAAmB,UAAAC,IAAI,EAAI;MAC9BH,cAAc,CAACG,IAAD,CAAd;IACH,CAFM,CAAP;EAGH,CAJQ,EAIP,CAACL,MAAD,CAJO,CAAT;;EAMA,IAAMG,WAAW,GAAG;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA,KACbH,MADa;cAAA;cAAA;YAAA;;YAENM,MAFM,GAEGZ,GAAG,CAACF,EAAD,EAAK,OAAL,EAAcQ,MAAd,CAFN;YAAA;YAAA,iCAGUL,MAAM,CAACW,MAAD,CAHhB;;UAAA;YAGNC,OAHM;;YAAA,KAKRA,OAAO,CAACC,MAAR,EALQ;cAAA;cAAA;YAAA;;YAAA,iCAMDD,OAAO,CAACF,IAAR,EANC;;UAAA;YASZI,OAAO,CAACC,GAAR,CAAY,mBAAZ;;UATY;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAApB;;EAcA,OACI,KAAC,oBAAD,CAAsB,QAAtB;IAA+B,KAAK,EAAE,EAAtC;IAAA,UAIKX;EAJL,EADJ;AASH,CAlCM"},"metadata":{},"sourceType":"module"}